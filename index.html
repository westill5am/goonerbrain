<script>
    const input = document.getElementById('search');
    const results = document.getElementById('results');

    async function handleSearch() {
        const query = input.value.trim();
        if (!query) return;

        results.innerHTML = '<p>Searching...</p>';

        try {
            const res = await fetch(`https://goonerbrain-api.onrender.com/api/search?q=${encodeURIComponent(query)}`);
            const data = await res.json();

            if (data.error) {
                results.innerHTML = `<p>Error: ${data.error}</p>`;
                return;
            }

            if (!data.length) {
                results.innerHTML = '<p>No results found.</p>';
                return;
            }

            results.innerHTML = data.map(video => {
                return `
                    <div class="card">
                        <a href="${video.url}" target="_blank">
                            <img src="${video.preview || 'https://via.placeholder.com/300x160'}" alt="${video.title}">
                            <h3>${video.title}</h3>
                            <p>${video.source}</p>
                        </a>
                    </div>
                `;
            }).join('');
        } catch (err) {
            results.innerHTML = `<p>Error: ${err.message}</p>`;
        }
    }

    input.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') handleSearch();
    });
</script>
